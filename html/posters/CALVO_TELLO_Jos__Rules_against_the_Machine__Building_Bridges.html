<?xml version="1.0" encoding="UTF-8"?>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <!--THIS FILE IS GENERATED FROM AN XML MASTER. DO NOT EDIT (5)-->
    <title>Rules against the Machine: Building Bridges from Text to Metadata </title>
    <meta name="author" content="José Calvo Tello"/>
    <meta name="generator" content="Text Encoding Initiative Consortium XSLT stylesheets"/>
    <meta name="DC.Title" content="Rules against the Machine: Building Bridges from Text to Metadata"/>
    <meta name="DC.Type" content="Text"/>
    <meta name="DC.Format" content="text/html"/>
    <link href="http://www.tei-c.org/release/xml/tei/stylesheet/tei.css" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" media="print" type="text/css" href="http://www.tei-c.org/release/xml/tei/stylesheet/tei-print.css"/>
  </head>
  <body class="simple" id="TOP">
    <div class="stdheader autogenerated">
      <h1 class="maintitle">
        <span class="titlem">Rules against the Machine: Building Bridges from Text to Metadata</span>
        <span class="titlem"/>
      </h1>
    </div>
    <div class="dhconvalidator-xml-link">
      <a href="CALVO_TELLO_Jos__Rules_against_the_Machine__Building_Bridges.xml">XML</a>
    </div>
    <!--TEI front-->
    <!--TEI body-->
    <div class="DH-Heading1" id="index.xml-body.1_div.1">
      <h2 class="DH-Heading1">
        <span class="headingNumber">1. </span>
        <span class="head">Introduction</span>
      </h2>
      <p>Digital literary studies advance in their research, requiring more specific metadata about literary phenomena: narrator (Hoover 2004), characters (Kastorp et al. 2015), place and period, etcetera. This metadata can be used to explain results in tasks like authorship attribution or genre detection, or to evaluate digital methods (Calvo Tello 2017). What could be the most efficient way to start annotating this information in corpora of thousand of texts in languages, genres and historical periods for which many NLP tools are not trained for? In this proposal, the aim is to identify specific literary metadata about entire texts with methods that are either language-independent or easily adaptable for humanists.</p>
    </div>
    <div class="DH-Heading1" id="index.xml-body.1_div.2">
      <h2 class="DH-Heading1">
        <span class="headingNumber">2. </span>
        <span class="head">Two Ways from Text to Metadata</span>
      </h2>
      <p>The two approaches to classify unlabeled samples applied here are rule-based classification and supervised machine learning. In rule-based classification (Witten et al. 2011), domain experts define formalised rules that correctly classify the samples. For example a rule based on a single token can be defined for each class to predict whether a text is written in third person (83% of the corpus) or first person using tokens for the two values are the Spanish words 
        <span style="font-style:italic">dije</span> ('I said') and 
        <span style="font-style:italic">dijo</span> (‘he said’), and the rule:
      </p>
      <ol>
        <li class="item">if 
          <span style="font-style:italic">dijo</span> appears 90% more than 
          <span style="font-style:italic">dije</span>, the novel is written in third person
        </li>
        <li class="item">if 
          <span style="font-style:italic">dijo</span> appears less, in first person
        </li>
      </ol>
      <p>The results of applying this rule can be presented as a confusion matrix:</p>
      <div class="figure">
        <img src="Pictures/21663ab62a689b32f814d12cb68ddc7d.png" alt="" class="graphic" width="100%" height="100%"/>
      </div>
      <p>Fig 1. Confusion Matrix of rule-based results about narrator</p>
      <p>For supervised methods (Müller and Guido 2016; VanderPlas 2016), we need labeled samples to train and evaluate the method. In the following table, the different classifiers and document-representations achieve different accuracy scores:</p>
      <div class="table" id="Table1">
        <table class="frame" style="border-collapse:collapse;border-spacing:0;">
          <tr>
            <td/>
            <td class="start bold">raw</td>
            <td class="start bold">relative</td>
            <td class="start bold">tfidf</td>
            <td class="start bold">zscores</td>
          </tr>
          <tr>
            <td class="start bold">SVC</td>
            <td class="center">0.90</td>
            <td class="center">0.83</td>
            <td class="center">0.83</td>
            <td class="center">0.88</td>
          </tr>
          <tr>
            <td class="start bold">KNN</td>
            <td class="center">0.83</td>
            <td class="center">0.88</td>
            <td class="center">0.81</td>
            <td class="center">0.81</td>
          </tr>
          <tr>
            <td class="start bold">RF</td>
            <td class="center">0.88</td>
            <td class="center">0.88</td>
            <td class="center">0.86</td>
            <td class="center">0.90</td>
          </tr>
          <tr>
            <td class="start bold">DT</td>
            <td class="center">0.84</td>
            <td class="center">0.83</td>
            <td class="center">0.84</td>
            <td class="center">0.82</td>
          </tr>
          <tr>
            <td class="start bold">LR</td>
            <td class="center">0.88</td>
            <td class="center">0.83</td>
            <td class="center">0.83</td>
            <td class="center">0.17</td>
          </tr>
          <tr>
            <td class="start bold">BN</td>
            <td class="center">0.72</td>
            <td class="center">0.72</td>
            <td class="center">0.72</td>
            <td class="center">0.82</td>
          </tr>
          <tr>
            <td class="start bold">GN</td>
            <td class="center">0.72</td>
            <td class="center">0.80</td>
            <td class="center">0.80</td>
            <td class="center">0.81</td>
          </tr>
        </table>
      </div>
      <p>Fig 2. Accuracy (F1-score) for narrator</p>
    </div>
    <div class="DH-Heading1" id="index.xml-body.1_div.3">
      <h2 class="DH-Heading1">
        <span class="headingNumber">3. </span>
        <span class="head">Corpus and Metadata</span>
      </h2>
      <p>The data is part of the 
        <span style="font-style:italic">Corpus of Spanish Novels of the Silver Age (1880-1939)</span> (used in Calvo Tello et al. 2017), with 350 novels in XML-TEI by 58 authors. Each text has been annotated manually with metadata and its degree of certainty has been assigned. 262 texts with either high or medium certainty have been used to create a gold-standard with the following classes:
      </p>
      <ol>
        <li class="item">protagonist.gender</li>
        <li class="item">protagonist.age</li>
        <li class="item">protagonist.socLevel</li>
        <li class="item">setting.type</li>
        <li class="item">setting.continent</li>
        <li class="item">setting.country</li>
        <li class="item">setting.name</li>
        <li class="item">narrator</li>
        <li class="item">representation</li>
        <li class="item">time.period</li>
        <li class="item">end</li>
      </ol>
    </div>
    <div class="DH-Heading1" id="index.xml-body.1_div.4">
      <h2 class="DH-Heading1">
        <span class="headingNumber">4. </span>
        <span class="head">Modelisation and Methods</span>
      </h2>
      <p>The scripts have been written in Python (available on GitHub) 
        <span id="ftn1_return">
          <a class="notelink" title="&lt;https://github.com/cligs/projects2018/tree/master/text2metadata-dh&gt;" href="#ftn1">
            <sup>1</sup>
          </a>
        </span>. The features have been represented as different document models (Kestemont et al. 2016):
      </p>
      <ul>
        <li class="item">raw frequencies</li>
        <li class="item">relative frequencies</li>
        <li class="item">tf-idf</li>
        <li class="item">z-scores</li>
      </ul>
      <p>Different classify algorithms (cross validation, 10 folds) and amount of Most Frequent Words have been evaluated. For each class a single token was used to represent each class value and a ratio was assigned for the default class value (see repository in GitHub for rules). Both approaches were compared to a “most populated class” baseline, quite high in many cases. </p>
    </div>
    <div class="DH-Heading1" id="index.xml-body.1_div.5">
      <h2 class="DH-Heading1">
        <span class="headingNumber">5. </span>
        <span class="head">Results</span>
      </h2>
      <p>The results of both approaches are as following:</p>
      <div class="table" id="Table2">
        <table class="frame" style="border-collapse:collapse;border-spacing:0;">
          <tr>
            <td class="center bold">Class</td>
            <td class="center bold">F1 baseline</td>
            <td class="center bold">F1 Rule</td>
            <td class="center bold">F1 Cross Mean</td>
            <td class="center bold">F1 Cross Std</td>
            <td class="center bold">Algorithm</td>
            <td class="center bold">Model</td>
            <td class="center bold">MFW</td>
            <td class="center bold">Winner</td>
          </tr>
          <tr>
            <td class="start">end</td>
            <td class="center">0.60</td>
            <td class="center">0.54</td>
            <td class="center">0.60</td>
            <td class="center">0.02</td>
            <td class="center">LR</td>
            <td class="center">tfidf</td>
            <td class="center">100</td>
            <td class="start">Baseline</td>
          </tr>
          <tr>
            <td class="start">narrator</td>
            <td class="center">0.83</td>
            <td class="center">0.80</td>
            <td class="center bold">0.91</td>
            <td class="center">0.04</td>
            <td class="center bold">RF</td>
            <td class="center bold">tfidf</td>
            <td class="center bold">1000</td>
            <td class="start bold">ML</td>
          </tr>
          <tr>
            <td class="start">protagonist.age</td>
            <td class="center">0.55</td>
            <td class="center">0.25</td>
            <td class="center">0.55</td>
            <td class="center">0.01</td>
            <td class="center">LR</td>
            <td class="center">tfidf</td>
            <td class="center">100</td>
            <td class="start">Baseline</td>
          </tr>
          <tr>
            <td class="start">protagonist.gender</td>
            <td class="center">0.80</td>
            <td class="center">0.68</td>
            <td class="center">0.80</td>
            <td class="center">0.01</td>
            <td class="center">BN</td>
            <td class="center">tfidf</td>
            <td class="center">100</td>
            <td class="start">Baseline</td>
          </tr>
          <tr>
            <td class="start">protagonist.socLevel</td>
            <td class="center">0.63</td>
            <td class="center">0.49</td>
            <td class="center">0.64</td>
            <td class="center">0.07</td>
            <td class="center">SVC</td>
            <td class="center">zscores</td>
            <td class="center">5000</td>
            <td class="start">Baseline</td>
          </tr>
          <tr>
            <td class="start">representation</td>
            <td class="center">0.88</td>
            <td class="center">0.80</td>
            <td class="center">0.88</td>
            <td class="center">0.01</td>
            <td class="center">LR</td>
            <td class="center">tfidf</td>
            <td class="center">100</td>
            <td class="start">Baseline</td>
          </tr>
          <tr>
            <td class="start">setting.continent</td>
            <td class="center">0.95</td>
            <td class="center">0.94</td>
            <td class="center">0.96</td>
            <td class="center">0.01</td>
            <td class="center">SVC</td>
            <td class="center">zscores</td>
            <td class="center">5000</td>
            <td class="start">Baseline</td>
          </tr>
          <tr>
            <td class="start">setting.continent.binar</td>
            <td class="center">0.95</td>
            <td class="center">0.95</td>
            <td class="center">0.95</td>
            <td class="center">0.19</td>
            <td class="center">LR</td>
            <td class="center">zscores</td>
            <td class="center">500</td>
            <td class="start">Baseline</td>
          </tr>
          <tr>
            <td class="start">setting.country</td>
            <td class="center">0.93</td>
            <td class="center">0.38</td>
            <td class="center">0.94</td>
            <td class="center">0.01</td>
            <td class="center">SVC</td>
            <td class="center">zscores</td>
            <td class="center">1000</td>
            <td class="start">Baseline</td>
          </tr>
          <tr>
            <td class="start">setting.country.binar</td>
            <td class="center">0.87</td>
            <td class="center">0.47</td>
            <td class="center">0.88</td>
            <td class="center">0.03</td>
            <td class="center">SVC</td>
            <td class="center">zscores</td>
            <td class="center">1000</td>
            <td class="start">Baseline</td>
          </tr>
          <tr>
            <td class="start">setting.name</td>
            <td class="center">0.64</td>
            <td class="center bold">0.85</td>
            <td class="center">0.71</td>
            <td class="center">0.02</td>
            <td class="center">SVC</td>
            <td class="center">zscores</td>
            <td class="center">1000</td>
            <td class="start bold">Rule</td>
          </tr>
          <tr>
            <td class="start">setting.type</td>
            <td class="center">0.48</td>
            <td class="center">0.46</td>
            <td class="center bold">0.71</td>
            <td class="center">0.05</td>
            <td class="center bold">SVC</td>
            <td class="center bold">zscores</td>
            <td class="center bold">5000</td>
            <td class="start bold">ML</td>
          </tr>
          <tr>
            <td class="start">time.period</td>
            <td class="center">0.95</td>
            <td class="center">0.95</td>
            <td class="center">0.97</td>
            <td class="center">0.01</td>
            <td class="center">BN</td>
            <td class="center">zscores</td>
            <td class="center">5000</td>
            <td class="start">Baseline</td>
          </tr>
        </table>
      </div>
      <p>Fig 3. Results</p>
      <p>In many cases the baselines are higher than the results of both approaches. The rule outperformed the baseline in the case of name of the setting with very good results. In two cases (narrator and setting's type), Machine Learning is the most successful approach and its F1 is statistically higher than the baseline (one sample t-test, ɑ = 5%). The algorithms Supported Vector Machines, Logistic Regression and Random Forest are most successful, while tf-idf and speacilly z-scores got the best results, the last one a data representation “highly uncommon in other applications” different from stylometry (Kestemont et al, 2016).</p>
    </div>
    <div class="DH-Heading1" id="index.xml-body.1_div.6">
      <h2 class="DH-Heading1">
        <span class="headingNumber">6. </span>
        <span class="head">Conclusions</span>
      </h2>
      <p>In this proposal I have used simple rules and simple features in order to detect relatively complex literary metadata in many cases with high baselines. While Machine Learning showed a statistically significant improvement in detection for two classes (type of setting and narrator), rules worked better for the name of the setting. This is a promising point to continue researching in order to annotate the rest of the corpus.</p>
    </div>
    <!--TEI back-->
    <div class="bibliogr" id="index.xml-back.1_div.1">
      <h2>
        <span class="headingNumber">Appendix A </span>
      </h2>
      <div class="listhead">Bibliography</div>
      <ol class="listBibl">
        <li id="index.xml-bibl-w299531aab3b3b1b1b3">
          <div class="biblfree">
            <span style="font-weight:bold">Calvo Tello, J.</span> (2017). What does Delta see inside the Author?: Evaluating Stylometric Clusters with Literary Metadata. III Congreso de La Sociedad Internacional Humanidades Digitales Hispánicas: Sociedades, Políticas, Saberes. Málaga: HDH, pp. 153–61 &lt; 
            <a class="link_ptr" href="http://hdh2017.es/wp-content/uploads/2017/10/Actas-HDH2017.pdf">
              <span>http://hdh2017.es/wp-content/uploads/2017/10/Actas-HDH2017.pdf</span>
            </a>&gt;.
          </div>
        </li>
        <li id="index.xml-bibl-w299531aab3b3b1b1b5">
          <div class="biblfree">
            <span style="font-weight:bold">Calvo Tello, J., Schlör, D., Henny-Krahmer, U. and Schöch, C.</span> (2017). Neutralising the Authorial Signal in Delta by Penalization: Stylometric Clustering of Genre in Spanish Novels. Montréal: ADHO, pp. 181–83 &lt; 
            <a class="link_ptr" href="https://dh2017.adho.org/abstracts/037/037.pdf">
              <span>https://dh2017.adho.org/abstracts/037/037.pdf</span>
            </a>&gt;.
          </div>
        </li>
        <li id="index.xml-bibl-w299531aab3b3b1b1b7">
          <div class="biblfree">
            <span style="font-weight:bold">Hoover, D. L.</span> (2004). Testing Burrows’s Delta. Literary and Linguistic Computing, 19(4): 453–75.
          </div>
        </li>
        <li id="index.xml-bibl-w299531aab3b3b1b1b9">
          <div class="biblfree">
            <span style="font-weight:bold">Kastorp, F., Kestemont, M., Schöch, C. and Bosch, A. Van den</span> (2015). The Love Equation: Computational Modeling of Romantic Relationships in French Classical Drama. Sixth International Workshop on Computational Models of Narrative. Atlanta, GA, USA. &lt;https://zenodo.org/record/18343&gt;.
          </div>
        </li>
        <li id="index.xml-bibl-w299531aab3b3b1b1c11">
          <div class="biblfree">
            <span style="font-weight:bold">Kestemont, M., Stover, J., Koppel, M., Karsdorp, F. and Daelemans, W.</span> (2016). Authenticating the writings of Julius Caesar. Expert Systems with Applications, 63: 86–96 &lt;http://dx.doi.org/10.1016/j.eswa.2016.06.029&gt;.
          </div>
        </li>
        <li id="index.xml-bibl-w299531aab3b3b1b1c13">
          <div class="biblfree">
            <span style="font-weight:bold">Müller, A. C. and Guido, S.</span> (2016). Introduction to Machine Learning with Python: A Guide for Data Scientist. Beijing: O’Reilly.
          </div>
        </li>
        <li id="index.xml-bibl-w299531aab3b3b1b1c15">
          <div class="biblfree">
            <span style="font-weight:bold">VanderPlas, J.</span> (2016). Python Data Science Handbook: Essential Tools for Working with Data. First edition. Beijing Boston Farnham: O’Reilly.
          </div>
        </li>
        <li id="index.xml-bibl-w299531aab3b3b1b1c17">
          <div class="biblfree">
            <span style="font-weight:bold">Witten, I., Frank, E. and Hall, M. </span>(2011). Data Mining: Practical Machine Learning Tools and Techniques. 3rd edition. San Francisco: Morgan Kaufmann.
          </div>
        </li>
      </ol>
    </div>
    <!--Notes in [TEI]-->
    <div class="notes">
      <div class="noteHeading">Notes</div>
      <div class="note" id="ftn1">
        <span class="noteLabel">1. </span>
        <div class="noteBody">&lt;https://github.com/cligs/projects2018/tree/master/text2metadata-dh&gt;</div>
      </div>
    </div>
    <div class="stdfooter autogenerated">
      <address>José Calvo Tello (jose.calvo@uni-wuerzburg.de), University of Würzburg, Germany</address>
    </div>
  </body>
</html>
